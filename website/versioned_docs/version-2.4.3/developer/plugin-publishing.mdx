---
sidebar_position: 0
description: åœ¨å•†åº—å‘å¸ƒè‡ªå·±çš„æ’ä»¶
---

# å‘å¸ƒæ’ä»¶

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

NoneBot ä¸ºå¼€å‘è€…æä¾›äº†åˆ†äº«æ’ä»¶çš„å®˜æ–¹å•†åº—ã€‚æœ¬æŒ‡å—å›Šæ‹¬**ä»åˆ›å»ºé¡¹ç›®åˆ°å‘å¸ƒåˆ° PyPIï¼Œæœ€ç»ˆæäº¤å•†åº—å®¡æ ¸**çš„å…¨è¿‡ç¨‹ã€‚

:::warning è­¦å‘Š
å¦‚æœä½ çš„æ’ä»¶åªæ˜¯æ»¡è¶³è‡ªç”¨éœ€æ±‚ï¼Œåˆ™å®Œå…¨å¯ä»¥é€‰æ‹©**ä¸å‘å¸ƒæ’ä»¶**ã€‚å‘å¸ƒæ’ä»¶**ä¸æ˜¯**ä½¿ç”¨æ’ä»¶çš„å¿…è¦æ¡ä»¶ã€‚

NoneBot ç¤¾åŒºå¯¹äºæ’ä»¶æœ‰ä¸€å®šè´¨é‡è¦æ±‚ï¼Œå¯¹äºä¸ç¬¦åˆè¦æ±‚çš„æ’ä»¶ï¼Œç¤¾åŒºæˆå‘˜å°†ä¼šè¦æ±‚ä¿®æ”¹ï¼Œç›´è‡³ç¬¦åˆè¦æ±‚åæ‰èƒ½é€šè¿‡å®¡æ ¸ï¼›å¦‚æœé•¿æœŸæœªæ›´æ–°ä¿®æ”¹ï¼Œç¤¾åŒºå°†ä¼šå…³é—­å½“å‰è¯·æ±‚ï¼Œä¹‹åå¦‚éœ€å‘å¸ƒè¯·é‡æ–°æäº¤å‘å¸ƒæ’ä»¶è¯·æ±‚ã€‚ç›¸åº”çš„è¦æ±‚ä¼šåœ¨æœ¬ç« èŠ‚ä»¥ä¸‹éƒ¨åˆ†ä»‹ç»ã€‚
:::

:::tip æç¤º
æœ¬ç« èŠ‚ä»…åŒ…å«æ’ä»¶å‘å¸ƒæµç¨‹æŒ‡å¯¼ï¼Œæ’ä»¶å¼€å‘è¯·æŸ¥é˜…å‰è¿°ç« èŠ‚ã€‚
:::

## å‡†å¤‡å·¥ä½œ

### æ’ä»¶å‘½åè§„èŒƒ

NoneBot æ’ä»¶ä½¿ç”¨ä¸‹è¿°å‘½åè§„èŒƒï¼š

- å¯¹äº**é¡¹ç›®å**ï¼Œå»ºè®®ç»Ÿä¸€ä»¥ `nonebot-plugin-` å¼€å¤´ï¼Œä¹‹åä¸ºæ‹Ÿå®šçš„æ’ä»¶åå­—ï¼Œè¯é—´ç”¨æ¨ªæ  `-` åˆ†éš”ï¼›
  - **é¡¹ç›®å**ç”¨äºä»£ç ä»“åº“åç§°ã€PyPI åŒ…çš„å‘å¸ƒåç§°ç­‰ï¼›
  - æœ¬æ–‡ä½¿ç”¨ `nonebot-plugin-{your-plugin-name}` ä¸ºä¾‹ã€‚
- å¯¹äº**æ¨¡å—å**ï¼Œå»ºè®®ä¸**é¡¹ç›®å**ä¸€è‡´ï¼Œä½†è¯é—´ç”¨ä¸‹åˆ’çº¿ `_` åˆ†éš”ï¼Œå³ç»Ÿä¸€ä»¥ `nonebot_plugin_` å¼€å¤´ï¼Œä¹‹åä¸ºæ‹Ÿå®šçš„æ’ä»¶åå­—ï¼›
  - **æ¨¡å—å**ç”¨äºç¨‹åºå¯¼å…¥ä½¿ç”¨ï¼Œåº”ä¸ºæ’ä»¶æ–‡ä»¶ï¼ˆå¤¹ï¼‰çš„åç§°ï¼›
  - æœ¬æ–‡ä½¿ç”¨ `nonebot_plugin_{your_plugin_name}` ä¸ºä¾‹ã€‚

### é¡¹ç›®ç»“æ„

:::tip æç¤º
æœ¬æ®µæ‰€è¿°çš„é¡¹ç›®ç»“æ„ä»…ä½œæ¨èï¼Œä¸åšå¼ºåˆ¶è¦æ±‚ã€‚
:::

æ’ä»¶ç¨‹åºæœ¬èº«ç»“æ„å¯å‚è€ƒ[æ’ä»¶ç»“æ„](../tutorial/create-plugin.md#æ’ä»¶ç»“æ„)ä¸€èŠ‚ï¼Œå”¯ä¸€åŒºåˆ«åœ¨äºï¼Œæ’ä»¶åŒ…å¯ä»¥ç›´æ¥å¤„äºé¡¹ç›®é¡¶å±‚ã€‚

æ’ä»¶é¡¹ç›®çš„ä¸€ç§ç»„ç»‡ç»“æ„å¦‚ä¸‹ï¼š

```tree
ğŸ“¦ nonebot-plugin-{your-plugin-name}
â”œâ”€â”€ ğŸ“‚ nonebot_plugin_{your_plugin_name}
â”‚   â”œâ”€â”€ ğŸ“œ __init__.py
â”‚   â””â”€â”€ ğŸ“œ config.py
â”œâ”€â”€ ğŸ“œ pyproject.toml
â””â”€â”€ ğŸ“œ README.md
```

åŠŸèƒ½å¼€å‘å¯ä»¥åœ¨ `__init__.py` ä¸­è¿›è¡Œæˆ–åœ¨åŒ…å†…éƒ¨åˆ›å»ºå…¶ä»–æ¨¡å—å¹¶åœ¨ `__init__.py` ä¸­å¯¼å…¥ã€‚

### ä»é¡¹ç›®æ¨¡æ¿å¼€å§‹

ä¸ºé™ä½æ–°æ‰‹é—¨æ§›ï¼Œæˆ‘ä»¬æä¾›ä¸‰æ¡æ¸…æ™°ã€å®Œæ•´ã€å¯å¤åˆ¶çš„å‘å¸ƒè·¯å¾„ã€‚

:::tip æç¤º
ä½ åªéœ€é€‰æ‹©ä¸€æ¡ä¸ä½ ä¹ æƒ¯ä¸€è‡´çš„è·¯å¾„ï¼Œ**å®Œæ•´è·Ÿéšå³å¯æˆåŠŸå‘å¸ƒ**ã€‚æ— éœ€åœ¨ä¸åŒå·¥å…·é—´åˆ‡æ¢æˆ–çŒœæµ‹é…ç½®ã€‚
:::

NoneBot ç”Ÿæ€ç›®å‰æœ‰å¦‚ä¸‹æ’ä»¶é¡¹ç›®æ¨¡æ¿ï¼š

- [RF-Tar-Railt/nonebot-plugin-template](https://github.com/RF-Tar-Railt/nonebot-plugin-template)

  æ­¤è·¯å¾„ä½¿ç”¨ **PDM** é¡¹ç›®ç®¡ç†å™¨ï¼Œç¬¦åˆ PEP 621 æ ‡å‡†ï¼Œè‡ªåŠ¨åŒ–ç¨‹åº¦é«˜ã€‚

- [fllesser/nonebot-plugin-template](https://github.com/fllesser/nonebot-plugin-template)

  æ­¤è·¯å¾„ä½¿ç”¨ **uv** é¡¹ç›®ç®¡ç†å™¨å’Œ **PoeThePoet** ä»»åŠ¡è¿è¡Œå™¨ï¼Œæ„å»ºé€Ÿåº¦å¿«ï¼Œé€‚åˆè¿½æ±‚æ•ˆç‡çš„å¼€å‘è€…ã€‚

- [A-kirami/nonebot-plugin-template](https://github.com/A-kirami/nonebot-plugin-template)

  æ­¤è·¯å¾„ä½¿ç”¨ **Poetry** é¡¹ç›®ç®¡ç†å™¨ï¼Œé€‚åˆç†Ÿæ‚‰ä¼ ç»Ÿ Python ç”Ÿæ€çš„å¼€å‘è€…ã€‚

#### 1. åˆ›å»ºé¡¹ç›®

1. è®¿é—®ä¸Šè¿°ä¸‰ä¸ªæ¨¡æ¿ä¹‹ä¸€ã€‚
2. ç‚¹å‡» **â€œUse this templateâ€** â†’ **â€œCreate a new repositoryâ€**ã€‚
3. ä»“åº“åç§°å¡«å†™ï¼š`nonebot-plugin-{your-plugin-name}`ï¼ˆæ­¤éƒ¨åˆ†ä»¥ `nonebot-plugin-weather` ä¸ºä¾‹ï¼‰ã€‚
4. ç‚¹å‡» **â€œCreate repository from templateâ€**ã€‚

#### 2. é…ç½®å‘å¸ƒæƒé™

1. è¿›å…¥æ–°ä»“åº“ â†’ **Settings** â†’ **Actions** â†’ **General**ã€‚
2. åœ¨ **Workflow permissions** ä¸‹ï¼Œå‹¾é€‰ **â€œRead and write permissionsâ€** â†’ ç‚¹å‡» **Save**ã€‚

#### 3. å…¨å±€æ›¿æ¢é¡¹ç›®ä¿¡æ¯

åœ¨ä»“åº“ä¸­ç‚¹å‡» **â€œAdd fileâ€** â†’ **â€œCreate new fileâ€**ï¼Œåˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ `LICENSE`ï¼Œé€‰æ‹©å¼€æºåè®®å¹¶æäº¤ï¼ˆæ­¤æ“ä½œä¼šè§¦å‘å·¥ä½œæµï¼‰ã€‚

ç„¶ååœ¨æœ¬åœ°å…‹éš†ä»“åº“ï¼Œä½¿ç”¨ç¼–è¾‘å™¨å¯¹ä»¥ä¸‹å†…å®¹è¿›è¡Œ**å…¨å±€æ›¿æ¢**ï¼š

:::tip æç¤º
æ­¤éƒ¨åˆ†ä»¥â€œå¤©æ°”æ’ä»¶â€ä¸ºä¾‹ï¼Œå®é™…çš„æ›¿æ¢å†…å®¹åº”è¯¥æ ¹æ®ä½ æ‰€åˆ›å»ºçš„æ’ä»¶åç§°ç­‰ç›¸åº”è°ƒæ•´ã€‚
:::

| åŸå†…å®¹                         | æ›¿æ¢ä¸º                             |
| ------------------------------ | ---------------------------------- |
| `nonebot-plugin-template`      | `nonebot-plugin-weather`           |
| `nonebot_plugin_template`      | `nonebot_plugin_weather`           |
| `<your_plugin_humanized_name>` | `å¤©æ°”æŸ¥è¯¢`                         |
| `<your_plugin_description>`    | `æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å®æ—¶å¤©æ°”ä¸æœªæ¥é¢„æŠ¥` |
| `<your_github>`                | `ä½ çš„GitHubç”¨æˆ·å`                 |
| `<your_email>`                 | `ä½ çš„é‚®ç®±`                         |

#### 4. å®‰è£…ä¾èµ–ä¸å¼€å‘

<Tabs groupId="publish-path" defaultValue="pdm" values={[
  {label: 'PDM + RF-Tar-Railt æ¨¡æ¿', value: 'pdm'},
  {label: 'uv + fllesser æ¨¡æ¿', value: 'uv'},
  {label: 'Poetry + A-kirami æ¨¡æ¿', value: 'poetry'},
]}>
  <TabItem value="pdm" label="PDM + RF-Tar-Railt æ¨¡æ¿">

```bash
# å®‰è£… PDMï¼ˆè‹¥æœªå®‰è£…ï¼‰
curl -sSL https://pdm-project.org/install-pdm.py | python3 -

# å®‰è£…é¡¹ç›®ä¾èµ–ï¼ˆè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼‰
pdm sync

# æ·»åŠ æ–°ä¾èµ–ï¼ˆå¦‚ httpxï¼‰
pdm add httpx
```

</TabItem>

  <TabItem value="uv" label="uv + fllesser æ¨¡æ¿">

```bash
# å®‰è£… uvï¼ˆWindowsï¼‰
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# å®‰è£… uvï¼ˆmacOS/Linuxï¼‰
curl -LsSf https://astral.sh/uv/install.sh | sh

# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆå« devï¼‰
uv sync --all-groups -p 3.12

# æ·»åŠ æ–°ä¾èµ–
uv add httpx
```

</TabItem>

  <TabItem value="poetry" label="Poetry + A-kirami æ¨¡æ¿">

```bash
# å®‰è£… Poetryï¼ˆæ¨èæ–¹å¼ï¼‰
curl -sSL https://install.python-poetry.org | python3 -

# å®‰è£…é¡¹ç›®ä¾èµ–
poetry install

# æ·»åŠ æ–°ä¾èµ–
poetry add httpx
```

</TabItem>
</Tabs>

#### 5. æ›´æ–°ç‰ˆæœ¬å¹¶å‘å¸ƒ

<Tabs
  groupId="publish-path-bump"
  defaultValue="bump-my-version"
  values={[
    { label: "ä½¿ç”¨ bump-my-version", value: "bump-my-version" },
    { label: "ä½¿ç”¨é¡¹ç›®ç®¡ç†å™¨", value: "bump-manager" },
    { label: "æ‰‹åŠ¨æ›´æ–°ç‰ˆæœ¬", value: "bump-manual" },
  ]}
>
  <TabItem value="bump-my-version" label="ä½¿ç”¨ bump-my-version">

[bump-my-version](https://github.com/callowayproject/bump-my-version) æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€å¯é…ç½®çš„ Python é¡¹ç›®ç‰ˆæœ¬æ›´æ–°å·¥å…·ï¼Œæ”¯æŒè‡ªåŠ¨æäº¤åˆ° Git ç­‰ VCSã€‚

<Tabs groupId="publish-path" defaultValue="pdm" values={[
  {label: 'PDM + RF-Tar-Railt æ¨¡æ¿', value: 'pdm'},
  {label: 'uv + fllesser æ¨¡æ¿', value: 'uv'},
  {label: 'Poetry + A-kirami æ¨¡æ¿', value: 'poetry'},
]}>
  <TabItem value="pdm" label="PDM + RF-Tar-Railt æ¨¡æ¿">

```bash
# å®‰è£… bump-my-version
pdm add --dev bump-my-version

# æ›´æ–° patch ç‰ˆæœ¬
pdm run bump patch

# æ¨é€ tag è§¦å‘å‘å¸ƒ
git push origin --tags
```

</TabItem>

  <TabItem value="uv" label="uv + fllesser æ¨¡æ¿">

```bash
# æ›´æ–° patch ç‰ˆæœ¬
uv run poe bump patch

# æ¨é€ tag è§¦å‘å‘å¸ƒ
git push origin --tags
```

</TabItem>

  <TabItem value="poetry" label="Poetry + A-kirami æ¨¡æ¿">

```bash
# å®‰è£… bump-my-version
poetry add --dev bump-my-version

# æ›´æ–° patch ç‰ˆæœ¬
poetry run bump patch

# æ¨é€ tag è§¦å‘å‘å¸ƒ
git push origin --tags
```

</TabItem>
</Tabs>

</TabItem>
  <TabItem value="bump-manager" label="ä½¿ç”¨é¡¹ç›®ç®¡ç†å™¨">

<Tabs groupId="publish-path" defaultValue="pdm" values={[
  {label: 'PDM + RF-Tar-Railt æ¨¡æ¿', value: 'pdm'},
  {label: 'uv + fllesser æ¨¡æ¿', value: 'uv'},
  {label: 'Poetry + A-kirami æ¨¡æ¿', value: 'poetry'},
]}>
  <TabItem value="pdm" label="PDM + RF-Tar-Railt æ¨¡æ¿">

éœ€è¦å®‰è£… PDM æ’ä»¶ [pdm-bump](https://github.com/carstencodes/pdm-bump)ã€‚

```bash
# å®‰è£… pdm-bump
pdm self add pdm-bump

# æ›´æ–° patch ç‰ˆæœ¬
pdm bump patch

# æ¨é€ tag è§¦å‘å‘å¸ƒ
git push origin --tags
```

</TabItem>

  <TabItem value="uv" label="uv + fllesser æ¨¡æ¿">

```bash
# æ›´æ–° patch ç‰ˆæœ¬
uv version --bump patch

# åˆ›å»ºç›¸åº”æäº¤ä¸æ ‡ç­¾
git add pyproject.toml
git commit -m "chore: release v0.1.1"  # æ›¿æ¢ä¸ºå®é™…çš„ç‰ˆæœ¬å·
git tag v0.1.1  # æ›¿æ¢ä¸ºå®é™…çš„ç‰ˆæœ¬å·

# æ¨é€ tag è§¦å‘å‘å¸ƒ
git push origin --tags
```

</TabItem>

  <TabItem value="poetry" label="Poetry + A-kirami æ¨¡æ¿">

```bash
# æ›´æ–°ç‰ˆæœ¬ï¼ˆè‡ªåŠ¨æäº¤å¹¶æ‰“æ ‡ç­¾ï¼‰
poetry version patch

# æ¨é€ tag è§¦å‘å‘å¸ƒ
git push origin --tags
```

</TabItem>
</Tabs>

</TabItem>
  <TabItem value="bump-manual" label="æ‰‹åŠ¨æ›´æ–°ç‰ˆæœ¬">

æ‰‹åŠ¨æ›´æ–° `pyproject.toml` ä¸­çš„ `version` å­—æ®µï¼Œç„¶åæ¨é€ tag è§¦å‘å‘å¸ƒå·¥ä½œæµ

```bash
git add pyproject.toml
git commit -m "chore: release v0.1.1"  # æ›¿æ¢ä¸ºå®é™…çš„ç‰ˆæœ¬å·
git tag v0.1.1  # æ›¿æ¢ä¸ºå®é™…çš„ç‰ˆæœ¬å·
git push origin --tags
```

</TabItem>
</Tabs>

æ¨é€ `v*` æ ‡ç­¾åï¼Œæ¨¡æ¿æä¾›çš„ GitHub Actions å·¥ä½œæµå°†è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° PyPIã€‚

#### 6. å‘å¸ƒåˆ° [PyPI](https://pypi.org)

<Tabs groupId="publish-method" defaultValue="template" values={[
  {label: 'ä½¿ç”¨æ¨¡æ¿çš„è‡ªåŠ¨å‘å¸ƒå·¥ä½œæµ', value: 'template'},
  {label: 'æ‰‹åŠ¨å‘å¸ƒ', value: 'manual'},
]}>
  <TabItem value="template" label="ä½¿ç”¨æ¨¡æ¿çš„è‡ªåŠ¨å‘å¸ƒå·¥ä½œæµ">
ä¸åŒæ¨¡æ¿ä½¿ç”¨çš„å‘å¸ƒæ–¹å¼å¯èƒ½ä¸åŒï¼Œå…·ä½“é…ç½®æµç¨‹å‚è€ƒå¯¹åº”æ¨¡æ¿çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ã€‚
</TabItem>

  <TabItem value="manual" label="æ‰‹åŠ¨å‘å¸ƒ">
æ ¹æ®é€‰ç”¨çš„æ„å»ºç³»ç»Ÿï¼Œåœ¨é¡¹ç›®çš„ `pyproject.toml` ä¸­å¡«å…¥å¿…è¦ä¿¡æ¯åè¿›è¡Œæ„å»ºä¸å‘å¸ƒã€‚

:::tip æç¤º
ä¸åŒæ„å»ºå·¥å…·çš„ä½¿ç”¨å¯èƒ½å­˜åœ¨å·®åˆ«ã€‚æœ¬æ–‡ä»…ä»¥ [`pdm`](https://pdm-project.org/zh/latest/),
[`poetry`](https://python-poetry.org/docs/), [`setuptools`](https://setuptools.pypa.io/en/latest/)
æ„å»ºç³»ç»Ÿ**æœ¬åœ°æ„å»ºä¸å‘å¸ƒ**ä¸ºç¤ºä¾‹è®²è§£ï¼Œå…¶ä½™æ„å»º/ç®¡ç†å·¥å…·ç­‰å’Œè‡ªåŠ¨åŒ–æ„å»ºçš„ç”¨æ³•è¯·è¯»è€…è‡ªè¡Œæ¢ç´¢ã€‚
:::

<Tabs groupId="publishMethod">
  <TabItem value="poetry" label="Poetry" default>

```bash
poetry publish --build  # æ„å»ºå¹¶å‘å¸ƒ

# ç­‰æ•ˆäºä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤
poetry build            # åªæ„å»º
poetry publish          # åªå‘å¸ƒå…ˆå‰çš„æ„å»º
```

  </TabItem>

  <TabItem value="pdm" label="PDM" default>

```bash
pdm publish             # æ„å»ºå¹¶å‘å¸ƒ

# ç­‰æ•ˆäºä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤
pdm build               # åªæ„å»º
pdm publish --no-build  # åªå‘å¸ƒå…ˆå‰çš„æ„å»º
```

  </TabItem>

  <TabItem value="setuptools" label="Setuptools (PEP 517)" default>

```bash
pip install build twine             # å®‰è£…é€šç”¨æ„å»ºä¸å‘å¸ƒå·¥å…·

python -m build --sdist --wheel .   # åªæ„å»º
twine upload dist/*                 # åªå‘å¸ƒå…ˆå‰çš„æ„å»º
```

  </TabItem>
</Tabs>

</TabItem>
</Tabs>

:::tip æç¤º
å‘å¸ƒå‰å»ºè®®è‡ªè¡Œæµ‹è¯•æ„å»ºåŒ…æ˜¯å¦å¯ç”¨ï¼Œé¿å…é—æ¼ä»£ç æ–‡ä»¶æˆ–èµ„æºæ–‡ä»¶ç­‰é—®é¢˜ã€‚
:::

## åŸºæœ¬è¦æ±‚

æ— è®ºä½ é€‰æ‹©å“ªæ¡è·¯å¾„ï¼Œä»¥ä¸‹å†…å®¹**å¿…é¡»**å®Œæˆï¼Œå¦åˆ™æ— æ³•é€šè¿‡å•†åº—è‡ªåŠ¨æ£€æŸ¥ï¼š

### èƒ½å¤Ÿæ­£ç¡®åŠ è½½

æ’ä»¶åŒ…å¿…é¡»èƒ½å¤Ÿè¢« NoneBot æ­£ç¡®åŠ è½½ï¼Œåœ¨å•†åº—å®¡æ ¸ä¸­ä¼šé€šè¿‡ **NoneFlow** è‡ªåŠ¨åŒ–åŠ è½½æµ‹è¯•è¿›è¡Œã€‚

#### ä¾èµ–å…¶ä»–æ’ä»¶

å¦‚æœæ’ä»¶ä¾èµ–å…¶ä»–æ’ä»¶æä¾›çš„åŠŸèƒ½ï¼Œåˆ™**å¿…é¡»**åœ¨ä»£ç ä¸­ä½¿ç”¨ `require()` æ¥å¼•å…¥è¯¥æ’ä»¶ï¼Œç„¶åæ‰èƒ½ `import` è¯¥æ’ä»¶æä¾›çš„åŠŸèƒ½ã€‚å…·ä½“ç»†èŠ‚å‚é˜…[è·¨æ’ä»¶è®¿é—®](../advanced/requiring.md)ã€‚

ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š

```python title=nonebot_plugin_weather/__init__.py
from nonebot import require

require("nonebot_plugin_apscheduler")

from nonebot_plugin_apscheduler import scheduler
```

#### ä¸èƒ½é›¶é…ç½®åŠ è½½çš„æ’ä»¶

å¦‚æœæ’ä»¶éœ€è¦å¿…è¦é…ç½®é¡¹æ‰èƒ½æ­£å¸¸å¯¼å…¥ï¼Œåˆ™**å¿…é¡»**åœ¨å•†åº—æäº¤è¡¨å•ä¸­å¡«å†™å¿…è¦çš„é…ç½®é¡¹å†…å®¹ã€‚

ä½†ä¸€ç§æ›´å¥½çš„åšæ³•æ˜¯ï¼Œ**å°†æ’ä»¶è®¾è®¡ä¸ºé›¶é…ç½®å³å¯åŠ è½½**ï¼ˆå…è®¸ç¼ºå°‘å¿…è¦é…ç½®é¡¹æ—¶æ’ä»¶ä»èƒ½æ­£å¸¸å¯¼å…¥ï¼Œä½†ä¸æ‰§è¡Œéœ€è¦ç›¸åº”é…ç½®é¡¹çš„åŠŸèƒ½ï¼‰ï¼Œå°¤å…¶æ˜¯å¯¹äºä¸€äº›å¿…è¦é…ç½®å«æœ‰æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†é’¥ã€Tokenã€API Key ç­‰ï¼‰çš„æ’ä»¶ã€‚è¿™æ ·å¯ä»¥é¿å…åœ¨å•†åº—æäº¤è¡¨å•æ—¶å¡«å†™æ•æ„Ÿä¿¡æ¯çš„é£é™©ã€‚

### æ’ä»¶å…ƒæ•°æ®

æ’ä»¶åŒ…**å¿…é¡»**å¡«å†™å…ƒæ•°æ®æ‰èƒ½é€šè¿‡ **NoneFlow** è‡ªåŠ¨åŒ–æ£€æŸ¥ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```python title=nonebot_plugin_weather/__init__.py
from nonebot.plugin import PluginMetadata

from .config import Config

__plugin_meta__ = PluginMetadata(
    # åŸºæœ¬ä¿¡æ¯ï¼ˆå¿…å¡«ï¼‰
    name="å¤©æ°”æŸ¥è¯¢",  # æ’ä»¶åç§°
    description="æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å®æ—¶å¤©æ°”ä¸æœªæ¥é¢„æŠ¥",  # æ’ä»¶ä»‹ç»
    usage="å‘é€ã€å¤©æ°” åŸå¸‚åã€‘è·å–å¤©æ°”ä¿¡æ¯",  # æ’ä»¶ç”¨æ³•

    # å‘å¸ƒé¢å¤–ä¿¡æ¯
    type="application",  # æ’ä»¶åˆ†ç±»
    # å‘å¸ƒå¿…å¡«ï¼Œå½“å‰æœ‰æ•ˆç±»å‹æœ‰ï¼š`library`ï¼ˆä¸ºå…¶ä»–æ’ä»¶ç¼–å†™æä¾›åŠŸèƒ½ï¼‰ï¼Œ`application`ï¼ˆå‘æœºå™¨äººç”¨æˆ·æä¾›åŠŸèƒ½ï¼‰ã€‚

    homepage="https://github.com/ä½ çš„ç”¨æˆ·å/nonebot-plugin-weather",
    # å‘å¸ƒå¿…å¡«ã€‚

    config=Config,
    # æ’ä»¶é…ç½®é¡¹ç±»ï¼Œå¦‚æœæœ‰é…ç½®ç±»åˆ™å¿…é¡»å¡«å†™ã€‚

    supported_adapters={"~onebot.v11"},
    # æ”¯æŒçš„é€‚é…å™¨é›†åˆï¼Œå…¶ä¸­ `~` åœ¨æ­¤å¤„ä»£è¡¨å‰ç¼€ `nonebot.adapters.`ï¼Œå…¶ä½™é€‚é…å™¨äº¦æŒ‰æ­¤æ ¼å¼å¡«å†™ã€‚
    # è‹¥æ’ä»¶åªä½¿ç”¨äº† NoneBot åŸºæœ¬æŠ½è±¡ï¼Œåº”æ˜¾å¼å¡«å†™ Noneï¼Œå¦åˆ™åº”è¯¥åˆ—å‡ºæ’ä»¶æ”¯æŒçš„é€‚é…å™¨ã€‚
)
```

:::caution æ³¨æ„
`__plugin_meta__` å˜é‡**å¿…é¡»**å¤„äºæ’ä»¶æœ€å¤–å±‚ï¼ˆå¦‚ `__init__.py` ä¸­ï¼‰ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸è¯†åˆ«ã€‚

ä¸€èˆ¬åšæ³•æ˜¯åœ¨ `__init__.py` ä¸­å®šä¹‰ `__plugin_meta__`ã€‚
:::

#### ç»§æ‰¿å…¶ä»–æ’ä»¶æ”¯æŒçš„é€‚é…å™¨

å¦‚æœä½ çš„æ’ä»¶ä¾èµ–äºå…¶ä»–æ’ä»¶æä¾›çš„æ”¯æŒåŠŸèƒ½ï¼Œè€Œå…¶ä»–æ’ä»¶å¯èƒ½æ”¯æŒæ›´å°‘çš„é€‚é…å™¨ï¼Œè¿™æ—¶å°±åº”è¯¥ä½¿ç”¨
[inherit_supported_adapters()](../api/plugin/load#inherit-supported-adapters) å‡½æ•°æ¥ç»§æ‰¿å…¶ä»–æ’ä»¶æ”¯æŒçš„é€‚é…å™¨ã€‚

ç¤ºä¾‹ç”¨æ³•å¦‚ä¸‹ï¼š

```python title=nonebot_plugin_weather/__init__.py
from nonebot import require
from nonebot.plugin import PluginMetadata, inherit_supported_adapters

from .config import Config

require("nonebot_plugin_alconna")  # å¿…é¡»å…ˆ require æ‰èƒ½è¢« inherit_supported_adapters å¤„ç†

__plugin_meta__ = PluginMetadata(
    name="å¤©æ°”æŸ¥è¯¢",
    description="æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å®æ—¶å¤©æ°”ä¸æœªæ¥é¢„æŠ¥",
    usage="å‘é€ã€å¤©æ°” åŸå¸‚åã€‘è·å–å¤©æ°”ä¿¡æ¯",
    type="application",
    homepage="https://github.com/ä½ çš„ç”¨æˆ·å/nonebot-plugin-weather",
    config=Config,

    supported_adapters=inherit_supported_adapters("nonebot_plugin_alconna"),
    # ç»§æ‰¿ nonebot_plugin_alconna æ’ä»¶çš„é€‚é…å™¨æ”¯æŒåˆ—è¡¨
)
```

### å‡†å¤‡é¡¹ç›®ä¸»é¡µ

é€šå¸¸å¯ä»¥ä½¿ç”¨ GitHub é¡¹ç›®é¡µé¢ä½œä¸ºé¡¹ç›®ä¸»é¡µï¼Œåœ¨ `README.md` æ–‡ä»¶ä¸­ç¼–å†™æ’ä»¶ä»‹ç»ç­‰å†…å®¹ã€‚

å†…å®¹å¤§è‡´åŒ…æ‹¬ï¼š

- æ’ä»¶åŠŸèƒ½ä»‹ç»ï¼›
- å®‰è£…æ–¹æ³•
  - **å¿…é¡»**æœ‰ NB-CLI æ–¹å¼å®‰è£…
  - å¯é€‰ä¾èµ–å¯ä»¥ç»™å‡ºå…¶ä»–å®‰è£…æ–¹å¼
  - **ä¸å¾—**ä½¿ç”¨æ—§å¼çš„ `bot.py` é…ç½®
- æ’ä»¶é…ç½®é¡¹ï¼ˆå¦‚ `Config` ç±»å­—æ®µï¼Œè‹¥æ— å¯è·³è¿‡ï¼‰
- æ’ä»¶è®¾ç½®çš„è§¦å‘è§„åˆ™ï¼ˆè‹¥æ— å¯è·³è¿‡ï¼‰
- æ’ä»¶çš„å…¶å®ƒç”¨æ³•ï¼ˆæŒ‰éœ€ç¼–å†™ï¼‰
- æ•ˆæœå›¾ã€æƒé™è¯´æ˜ï¼ˆæŒ‰éœ€ç¼–å†™ï¼‰

## è´¨é‡è¦æ±‚

ä»¥ä¸‹å†…å®¹**å¼ºçƒˆå»ºè®®**å®Œæˆï¼Œå¦åˆ™ç¤¾åŒºæˆå‘˜å°†ä¼šè¦æ±‚ä¿®æ”¹ï¼š

### ä¾èµ–ç®¡ç†åŸåˆ™

- **å¿…é¡»**åŒ…å« `nonebot2`ã€‚
- **å¿…é¡»**å°†æ’ä»¶ç›´æ¥ä½¿ç”¨çš„é€‚é…å™¨åŠ å…¥ä¾èµ–åˆ—è¡¨ï¼Œå¦‚ï¼šä½¿ç”¨ OneBot é€‚é…å™¨çš„æ’ä»¶åº”æ·»åŠ  `nonebot-adapter-onebot` ä¾èµ–ï¼›
- **ç¦æ­¢**ä½¿ç”¨ `==` é”å®šå•ä¸€ç‰ˆæœ¬ï¼Œä½¿ç”¨ `>=` æˆ– `~=`ã€‚
- **ç¦æ­¢**æ·»åŠ  `nonebot`ï¼ˆV1ï¼‰ä½œä¸ºä¾èµ–ã€‚
- æ‰€æœ‰åœ¨ä»£ç ä¸­ `import` çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¿…é¡»åœ¨ `pyproject.toml` çš„ `dependencies` ä¸­åˆ—å‡ºã€‚

### é¿å…è¯¯ç”¨åŒæ­¥æ“ä½œ

NoneBot æ˜¯ä¸€ä¸ªå¼‚æ­¥æ¡†æ¶ï¼Œæ’ä»¶ä¸­**ç¦æ­¢**ä½¿ç”¨ä»»ä½•å¯èƒ½é˜»å¡äº‹ä»¶å¾ªç¯çš„åŒæ­¥æ“ä½œï¼Œä¾‹å¦‚ï¼š

- åŒæ­¥ HTTP è¯·æ±‚ï¼ˆå¦‚ `requests` åº“ï¼‰ï¼›

  **æ¨è**æ“ä½œï¼ˆä»¥ `httpx` ä¸ºä¾‹ï¼‰ï¼š

  ```python
  import httpx

  async with httpx.AsyncClient() as client:
      response = await client.get("https://api.example.com/data")  # å¼‚æ­¥æ“ä½œï¼Œä¸é˜»å¡æœºå™¨äºº
  ```

  **ç¦æ­¢**æ“ä½œï¼š

  ```python
  import requests

  requests.get("https://api.example.com/data")  # åŒæ­¥æ“ä½œï¼Œä¼šé˜»å¡æœºå™¨äºº
  ```

- å…¶ä»–å¯èƒ½é•¿æ—¶é—´è¿è¡Œé˜»å¡äº‹ä»¶å¾ªç¯çš„æ“ä½œã€‚

### æœ¬åœ°æ–‡ä»¶å­˜å‚¨

å¦‚æœæ’ä»¶éœ€è¦åœ¨æœ¬åœ°å­˜å‚¨æ•°æ®ã€é…ç½®æˆ–ç¼“å­˜æ–‡ä»¶ï¼Œ**å¿…é¡»**ä½¿ç”¨ [`nonebot-plugin-localstore`](https://github.com/nonebot/plugin-localstore) ç®¡ç†ï¼Œå…·ä½“ç»†èŠ‚å‚é˜…[æœ¬åœ°å­˜å‚¨](../best-practice/data-storing.md)ç« èŠ‚ã€‚

å‚è€ƒç¤ºä¾‹ï¼š

```python title=nonebot_plugin_weather/__init__.py
from pathlib import Path
from nonebot import require
require("nonebot_plugin_localstore")

import nonebot_plugin_localstore as store

# è·å–æ’ä»¶ç¼“å­˜æ–‡ä»¶ï¼ˆå¤¹ï¼‰è·¯å¾„
weather_cache_dir: Path = store.get_plugin_cache_dir()
weather_cache_file: Path = store.get_plugin_cache_file("cache.json")

# è·å–æ’ä»¶é…ç½®æ–‡ä»¶ï¼ˆå¤¹ï¼‰è·¯å¾„
weather_config_dir: Path = store.get_plugin_config_dir()
weather_config_file: Path = store.get_plugin_config_file("config.toml")

# è·å–æ’ä»¶æ•°æ®æ–‡ä»¶ï¼ˆå¤¹ï¼‰è·¯å¾„
weather_data_dir: Path = store.get_plugin_data_dir()
weather_data_file: Path = store.get_plugin_data_file("resource-index.json")
```

## å•†åº—å®¡æ ¸

### æäº¤ç”³è¯·

å®Œæˆåœ¨ PyPI çš„æ’ä»¶å‘å¸ƒæµç¨‹åï¼Œå‰å¾€[å•†åº—](/store/plugins)é¡µé¢ï¼Œåˆ‡æ¢åˆ°æ’ä»¶é¡µç­¾ï¼Œç‚¹å‡» **å‘å¸ƒæ’ä»¶** æŒ‰é’®ã€‚

åœ¨å¼¹å‡ºçš„æ’ä»¶ä¿¡æ¯æäº¤è¡¨å•å†…ï¼Œå¡«å…¥æ‚¨æ‰€è¦å‘å¸ƒçš„ç›¸åº”æ’ä»¶ä¿¡æ¯ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœæ’ä»¶éœ€è¦å¿…è¦é…ç½®é¡¹æ‰èƒ½æ­£å¸¸å¯¼å…¥ï¼Œè¯·åœ¨â€œæ’ä»¶é…ç½®é¡¹â€ä¸­å¡«å†™å¿…è¦çš„å†…å®¹ï¼ˆè¯·å‹¿å¡«å†™å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼‰ã€‚

å®Œæˆå¡«å†™åï¼Œç‚¹å‡» **å‘å¸ƒ** æŒ‰é’®ï¼Œè¿™å°†è‡ªåŠ¨è·³è½¬ NoneBot ä»“åº“å†…çš„â€œå‘å¸ƒæ’ä»¶â€é¡µé¢ã€‚ç¡®è®¤ä¿¡æ¯æ— è¯¯åç‚¹å‡»é¡µé¢ä¸‹æ–¹çš„ `Submit new issue` æŒ‰é’®è¿›è¡Œæœ€ç»ˆæäº¤å³å¯ã€‚

### ç­‰å¾…æ’ä»¶å®¡æ ¸

æ’ä»¶å‘å¸ƒ Issue åˆ›å»ºåï¼Œå°†ä¼šç»è¿‡ **NoneFlow Bot** çš„è‡ªåŠ¨å‰ç½®æ£€æŸ¥ï¼Œä»¥ç¡®ä¿æ’ä»¶ä¿¡æ¯æ­£ç¡®æ— è¯¯ã€æ’ä»¶èƒ½è¢«æ­£ç¡®åŠ è½½ã€‚

:::tip æç¤º
è‹¥æ’ä»¶æ£€æŸ¥æœªé€šè¿‡æˆ–ä¿¡æ¯æœ‰è¯¯ï¼Œ**ä¸å¿…**å…³é—­å½“å‰ Issueã€‚åªéœ€æ›´æ–°æ’ä»¶å¹¶ä¸Šä¼ åˆ° PyPI/ä¿®æ”¹ä¿¡æ¯åå‹¾é€‰æ’ä»¶æµ‹è¯•å‹¾é€‰æ¡†å³å¯é‡æ–°è§¦å‘æ’ä»¶æ£€æŸ¥ã€‚
:::

ä¹‹åï¼ŒNoneBot çš„ç»´æŠ¤è€…å’Œä¸€äº›å¿—æ„¿è€…ä¼šåˆæ­¥æ£€æŸ¥æ’ä»¶ä»£ç ï¼Œå¸®åŠ©å‡å°‘è¯¥æ’ä»¶çš„é—®é¢˜ã€‚

å®Œæˆè¿™äº›æ­¥éª¤åï¼Œæ‚¨çš„æ’ä»¶å°†ä¼šè¢«è‡ªåŠ¨åˆå¹¶åˆ°[å•†åº—](/store/plugins)ï¼Œè€Œæ‚¨ä¹Ÿå°†æˆä¸º [**NoneBot è´¡çŒ®è€…**](https://github.com/nonebot/nonebot2/graphs/contributors)çš„ä¸€å‘˜ã€‚
